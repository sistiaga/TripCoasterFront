<!-- master - MARSISCA - BEGIN 2025-10-11 -->
<div class="add-trip-modal">
  <h2 mat-dialog-title>Add New Trip</h2>

  <mat-dialog-content>
    <form [formGroup]="tripForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Trip Name</mat-label>
        <input
          matInput
          type="text"
          formControlName="name"
          placeholder="My trip to Europe"
        />
        @if (tripForm.get('name')?.invalid && tripForm.get('name')?.touched) {
          <mat-error>{{ getNameError() }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          formControlName="description"
          placeholder="An incredible journey through historic cities..."
          rows="3"
        ></textarea>
      </mat-form-field>

      <div class="date-fields">
        <mat-form-field appearance="outline" class="date-field">
          <mat-label>Start Date</mat-label>
          <input
            matInput
            [matDatepicker]="startPicker"
            formControlName="startDate"
            placeholder="DD/MM/YYYY"
          />
          <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
          @if (tripForm.get('startDate')?.invalid && tripForm.get('startDate')?.touched) {
            <mat-error>{{ getStartDateError() }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="date-field">
          <mat-label>End Date</mat-label>
          <input
            matInput
            [matDatepicker]="endPicker"
            formControlName="endDate"
            placeholder="DD/MM/YYYY"
          />
          <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
          @if (tripForm.get('endDate')?.invalid && tripForm.get('endDate')?.touched) {
            <mat-error>{{ getEndDateError() }}</mat-error>
          }
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Rating (0-10)</mat-label>
        <input
          matInput
          type="number"
          formControlName="rating"
          placeholder="9.5"
          step="0.1"
          min="0"
          max="10"
        />
        @if (tripForm.get('rating')?.invalid && tripForm.get('rating')?.touched) {
          <mat-error>{{ getRatingError() }}</mat-error>
        }
      </mat-form-field>

      @if (errorMessage) {
        <div class="error-message">
          {{ errorMessage }}
        </div>
      }
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button
      mat-button
      type="button"
      (click)="onCancel()"
      [disabled]="isLoading"
    >
      Cancel
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      [disabled]="isLoading || tripForm.invalid"
    >
      @if (isLoading) {
        <mat-spinner diameter="20"></mat-spinner>
      } @else {
        Create Trip
      }
    </button>
  </mat-dialog-actions>
</div>
<!-- master - MARSISCA - END 2025-10-11 -->
